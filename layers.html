<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Layers · TFire</title><meta name="title" content="Layers · TFire"/><meta property="og:title" content="Layers · TFire"/><meta property="twitter:title" content="Layers · TFire"/><meta name="description" content="Documentation for TFire."/><meta property="og:description" content="Documentation for TFire."/><meta property="twitter:description" content="Documentation for TFire."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/custom.css" rel="stylesheet" type="text/css"/><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="TFire logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">TFire</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="collection.html">Collection</a></li><li class="is-active"><a class="tocitem" href="layers.html">Layers</a><ul class="internal"><li><a class="tocitem" href="#Adding-Layers"><span>Adding Layers</span></a></li><li><a class="tocitem" href="#Listing-Available-Layers"><span>Listing Available Layers</span></a></li><li><a class="tocitem" href="#Repainting-vs-NonRepainting"><span>Repainting vs NonRepainting</span></a></li><li><a class="tocitem" href="#Creating-New-Layer-Types-(Advanced)"><span>Creating New Layer Types (Advanced)</span></a></li><li><a class="tocitem" href="#Add-Layer-Under-The-Hood-(Developer)"><span>Add Layer - Under The Hood (Developer)</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li><li><a class="tocitem" href="data_views.html">DataViews</a></li><li><a class="tocitem" href="returns.html">Returns</a></li><li><a class="tocitem" href="sfdb.html">SimpleFastDB</a></li><li><a class="tocitem" href="specification.html">Specification</a></li><li><a class="tocitem" href="external_data.html">External Data Handler</a></li><li><a class="tocitem" href="back_testing.html">Backtesting</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/tutorial_basics.html">Basics</a></li><li><a class="tocitem" href="tutorials/tutorial_backtest.html">Backtesting</a></li></ul></li><li><span class="tocitem">List of Functions</span><ul><li><a class="tocitem" href="functions/functions_collection.html">Collection</a></li><li><a class="tocitem" href="functions/functions_dataviews.html">DataViews</a></li><li><a class="tocitem" href="functions/functions_returns.html">Returns</a></li><li><a class="tocitem" href="functions/functions_sfdb.html">SimpleFastDB</a></li><li><a class="tocitem" href="functions/functions_specification.html">Specification</a></li><li><a class="tocitem" href="functions/functions_edh.html">External Data Handler</a></li><li><a class="tocitem" href="functions/functions_backtest.html">Backtesting</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href="layers.html">Layers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="layers.html">Layers</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Layers"><a class="docs-heading-anchor" href="#Layers">Layers</a><a id="Layers-1"></a><a class="docs-heading-anchor-permalink" href="#Layers" title="Permalink"></a></h1><p>A Layer may be thought of as a more generalized form of a technical indicator. Every <a href="collection.html#Collection">Collection</a> may contain one or more Layers. All Assets in a Collection contain the same Layers. Layers are always stacked on top of each other in a chain, where each Layer may use information from the Layers below as well as the raw time series data associated with the Collection. </p><p>Layers provide increased flexibility compared to ordinary technical indicators. For example, an MACD or a Bollinger Bands Layer may be created upon any moving average layer (SMA, EMA etc).</p><h2 id="Adding-Layers"><a class="docs-heading-anchor" href="#Adding-Layers">Adding Layers</a><a id="Adding-Layers-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Layers" title="Permalink"></a></h2><p>A new layer is added with the <a href="functions/functions_layers.html#TFire.add_layer-Union{Tuple{T}, Tuple{Collection, Type{T}}} where T&lt;:AssetLayer"><code>add_layer()</code></a> function.</p><p>Example:</p><pre><code class="language- hljs">julia&gt; collection_sma = add_layer(collection, LayerSMA);

julia&gt; collection_macd = add_layer(collection_sma, LayerMACD);</code></pre><p>Here a SMA Layer is added to the Collection <code>collection</code> creating a new Collection <code>collection_sma</code>. A MACD Layer is then added to <code>collection_sma</code> creating <code>collection_macd</code>.</p><p>A Layer further down the chain may be added directly if it is uniquely specified, i.e. if which layers to add further up the chain can be determined uniquely, either because there is only one possible or only one is specified in the settings provided.</p><p>Example:</p><pre><code class="language- hljs">julia&gt; collection_macd = add_layer(collection, LayerMACD);
Error. Settings not unique. Can not determine which layers to produce
No layers added

julia&gt; collection.settings
TSDLink
:resolution =&gt; &quot;1d&quot;
:default_price_field =&gt; :adj_close_log
   ---

julia&gt; collection.settings[LayerSMA] = Parameters(LayerSMA, :win_sizes =&gt; [12,26])

julia&gt; collection.settings
TSDLink
:resolution =&gt; &quot;1d&quot;
:default_price_field =&gt; :adj_close_log
   ---
LayerSMA
:win_sizes =&gt; [12, 26]
   ---

julia&gt; collection_macd = add_layer(collection, LayerMACD)
-| Collection |- (Continuous) -&gt; LayerSMA -&gt; LayerMACD
Tickers: 399, MMM to ZION
Samples: 798446</code></pre><p>Above, a Layer to pick above LayerMACD is first not uniquely specified, and thus an error is thrown. Settings for LayerSMA are then added to the Collection and LayerMACD may be added.</p><h2 id="Listing-Available-Layers"><a class="docs-heading-anchor" href="#Listing-Available-Layers">Listing Available Layers</a><a id="Listing-Available-Layers-1"></a><a class="docs-heading-anchor-permalink" href="#Listing-Available-Layers" title="Permalink"></a></h2><p>Available layertypes may be listed with the <a href="functions/functions_layers.html#TFire.list_available_layertypes-Tuple{}"><code>list_available_layertypes()</code></a> function.</p><h2 id="Repainting-vs-NonRepainting"><a class="docs-heading-anchor" href="#Repainting-vs-NonRepainting">Repainting vs NonRepainting</a><a id="Repainting-vs-NonRepainting-1"></a><a class="docs-heading-anchor-permalink" href="#Repainting-vs-NonRepainting" title="Permalink"></a></h2><p>Technical indicators may be repainting (also called noncausal) or nonrepainting (causal) and naturally the same goes for Layers in TFire. A repainting indicator may update past values depending on future information while a nonrepainting one may not. TFire is designed to be able to handle repainting indicators (Layers) without introducing look ahead-bias.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>There can never be a nonrepainting layer below a repainting one. However there CAN be a repainting layer below a nonrepainting one.</p></div></div><p>To check if a layer is repainting or nonrepainting, use the <a href="functions/functions_layers.html#TFire.LayerRepaintingTrait-Tuple{Type{&lt;:AssetLayer}}"><code>LayerRepaintingTrait()</code></a> function.</p><h2 id="Creating-New-Layer-Types-(Advanced)"><a class="docs-heading-anchor" href="#Creating-New-Layer-Types-(Advanced)">Creating New Layer Types (Advanced)</a><a id="Creating-New-Layer-Types-(Advanced)-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-New-Layer-Types-(Advanced)" title="Permalink"></a></h2><p>Coming soon!</p><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><p><a href="functions/functions_layers.html#Layers-Functions">Layers - Functions</a></p><p>```</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="collection.html">« Collection</a><a class="docs-footer-nextpage" href="data_views.html">DataViews »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Monday 29 January 2024 01:17">Monday 29 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
