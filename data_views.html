<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DataViews · TFire</title><meta name="title" content="DataViews · TFire"/><meta property="og:title" content="DataViews · TFire"/><meta property="twitter:title" content="DataViews · TFire"/><meta name="description" content="Documentation for TFire."/><meta property="og:description" content="Documentation for TFire."/><meta property="twitter:description" content="Documentation for TFire."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/custom.css" rel="stylesheet" type="text/css"/><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="TFire logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">TFire</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="collection.html">Collection</a></li><li><a class="tocitem" href="layers.html">Layers</a></li><li><a class="tocitem" href="specification.html">Specification</a></li><li class="is-active"><a class="tocitem" href="data_views.html">DataViews</a><ul class="internal"><li><a class="tocitem" href="#AssetDataViews"><span>AssetDataViews</span></a></li><li><a class="tocitem" href="#CollectionDataViews"><span>CollectionDataViews</span></a></li><li><a class="tocitem" href="#NonRepainting-DataViews"><span>NonRepainting DataViews</span></a></li><li class="toplevel"><a class="tocitem" href="#DonatedDataViews"><span>DonatedDataViews</span></a></li><li class="toplevel"><a class="tocitem" href="#FuturePriceView"><span>FuturePriceView</span></a></li></ul></li><li><a class="tocitem" href="returns.html">Returns</a></li><li><a class="tocitem" href="sfdb.html">SimpleFastDB</a></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">External Data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="external_data.html">External Data Handler</a></li><li><a class="tocitem" href="external_data_disk.html">Data From Disk</a></li><li><a class="tocitem" href="external_data_internet.html">Data From Internet</a></li><li><a class="tocitem" href="external_data_sources.html">Internet Data Sources</a></li><li><a class="tocitem" href="external_data_adding_source.html">Adding A New Data Source</a></li></ul></li><li><a class="tocitem" href="back_testing.html">Backtesting</a></li><li><a class="tocitem" href="layers_user_defined.html">Creating New Layers</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/tutorial_basics.html">Basics</a></li><li><a class="tocitem" href="tutorials/tutorial_backtest.html">Backtesting</a></li></ul></li><li><span class="tocitem">List of Functions</span><ul><li><a class="tocitem" href="functions/functions_collection.html">Collection</a></li><li><a class="tocitem" href="functions/functions_specification.html">Specification</a></li><li><a class="tocitem" href="functions/functions_dataviews.html">DataViews</a></li><li><a class="tocitem" href="functions/functions_returns.html">Returns</a></li><li><a class="tocitem" href="functions/functions_sfdb.html">SimpleFastDB</a></li><li><a class="tocitem" href="functions/functions_edh.html">External Data Handler</a></li><li><a class="tocitem" href="functions/functions_backtest.html">Backtesting</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href="data_views.html">DataViews</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="data_views.html">DataViews</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="DataViews"><a class="docs-heading-anchor" href="#DataViews">DataViews</a><a id="DataViews-1"></a><a class="docs-heading-anchor-permalink" href="#DataViews" title="Permalink"></a></h1><h2 id="AssetDataViews"><a class="docs-heading-anchor" href="#AssetDataViews">AssetDataViews</a><a id="AssetDataViews-1"></a><a class="docs-heading-anchor-permalink" href="#AssetDataViews" title="Permalink"></a></h2><p>DataViews are a way to access either raw time series data or Layer data related to an Asset (see <a href="collection.html#Assets">Assets</a>) or a <a href="collection.html#Collection">Collection</a>.</p><p>For example, if <code>a</code> is an Asset that has a corresponding times series with the field name <code>:volume</code>, then <code>dv = DVTimeSeries(a, :volume)</code> creates a <code>DVTimeSeries</code>  (short for DataViewTimeSeries) which is a subtype to <code>AssetDataView</code>. <code>dv[i][j]</code> then gives the <code>j</code>:th value of the <code>i</code>:th sample, or simply<code>dv[i]</code> gives the whole view  of the volume field that is related to the <code>i</code>:th sample. </p><p>Likewise, if we have <code>dvl = DVLayerField(a, :field_name, LayerType)</code>, then <code>dv[i][j]</code> gives  <code>j</code>:th value of the <code>i</code>:th sample for the field <code>:field_name</code> in the Layer of type <code>LayerType</code>. Here, and in many other cases, the <code>LayerType</code> may be completely omitted if the desired Layer is the outhermost one of the Layers in the Asset.</p><h2 id="CollectionDataViews"><a class="docs-heading-anchor" href="#CollectionDataViews">CollectionDataViews</a><a id="CollectionDataViews-1"></a><a class="docs-heading-anchor-permalink" href="#CollectionDataViews" title="Permalink"></a></h2><p>If instead <code>c</code> is a <code>Collection</code> then <code>cdv = DVTimeSeries(c, :volume)</code> creates a  <code>CDV{DVTimeSeries}</code>  (where CDV is short for CollectionDataView) which contains the DVTimeSeries for every Asset in the Collection. Then <code>cdv[1] == DVTimeSeries(a, :volume)</code> for the first Asset <code>a</code> given by the iterator over all Assets. <code>cdv[i][j][k]</code> thus gives the <code>k</code>:th value of the time series of <code>:volume</code> corresponding to the <code>j</code>:th sample in the  <code>i</code>:th Asset. </p><h3 id="FlatCDV"><a class="docs-heading-anchor" href="#FlatCDV">FlatCDV</a><a id="FlatCDV-1"></a><a class="docs-heading-anchor-permalink" href="#FlatCDV" title="Permalink"></a></h3><p>The CDV may also be flattened to a FlatCDV. If <code>fcdv = FlatCDV(cdv)</code> then the views for all samples in the Collection are stored in one dimension so that <code>fcdv[i]</code> gives the corresponding view of the <code>:volume</code> field for the <code>i</code>:th sample in the whole Collection. </p><p>The FlatCDV is useful when the value for two different fields are to be compared for the same sample without the need to know which precise sample it is. For example if the correlation between two different fields are to be calculated for all samples in a Collection.</p><h2 id="NonRepainting-DataViews"><a class="docs-heading-anchor" href="#NonRepainting-DataViews">NonRepainting DataViews</a><a id="NonRepainting-DataViews-1"></a><a class="docs-heading-anchor-permalink" href="#NonRepainting-DataViews" title="Permalink"></a></h2><p>The NonRepainting Dataviews are useful when constructing NonRepainting Layers. If <code>a</code> is an Asset that has a corresponding times series with the field name <code>:volume</code>, then <code>dv = DVNonRepaintingTimeSeries(a, :volume)</code> creates a  <code>NonRepaintingDVTimeSeries.</code>. <code>dv</code> then contains a view of the volume field from the first datetime contained in any of the Asset&#39;s samples to the last datetime  contained in any of the samples.</p><p>Below is an example of the use of a NonRepainting DataView taken from the code creating the SMA Layer used in TFire. Since the Simple Moving Average indicator is a non repainting indicator a NonRepainting DataView is used to access the price data.</p><pre><code class="nohighlight hljs"># 
price_field = get_parameter(settings, LayerSMA, :price)

# input vectors
dvts = DVNonRepaintingTimeSeries(asset, price_field)</code></pre><h1 id="DonatedDataViews"><a class="docs-heading-anchor" href="#DonatedDataViews">DonatedDataViews</a><a id="DonatedDataViews-1"></a><a class="docs-heading-anchor-permalink" href="#DonatedDataViews" title="Permalink"></a></h1><p>Data Views on donated Assets/Collections (see <a href="collection.html#Donation">Donation</a>) work just like ordinary DataViews with the exception that the DataView should be applied to a <code>DonatedAssetLink</code> and not to an Asset. </p><p>Example:</p><pre><code class="nohighlight hljs">TFire&gt; collection_sma = add_layer(collection, LayerSMA);

TFire&gt; collection = collection[collection_sma]; # This removes dates that are in collection but not in collection_sma

TFire&gt; col_donated = donate(collection, collection_sma);

TFire&gt; asset_don = get_first_asset(col_donated) # special function to get first asset of a Collection. Useful for debugging etc.
-| Asset |-
Ticker: MMM
Samples: 2020

TFire&gt; donated_dv = DVLayerDictKey(get_donated_asset_link(asset_don, &quot;MMM&quot;), :ma_values, 26)</code></pre><p>In the example above we can access the Simple Moving Average Layer from another Collection.</p><h1 id="FuturePriceView"><a class="docs-heading-anchor" href="#FuturePriceView">FuturePriceView</a><a id="FuturePriceView-1"></a><a class="docs-heading-anchor-permalink" href="#FuturePriceView" title="Permalink"></a></h1><p>A special kind of DataView category is the FuturePriceView. It&#39;s the only DataView that is allowed access to data past the evaluation date, specificallt price data. Its primary use is to calculate future returns (see <a href="returns.html#Returns">Returns</a>) after the evaluation date.</p><p>For a list of related functions see <a href="functions/functions_dataviews.html#DataViews-Functions">DataViews - Functions</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="specification.html">« Specification</a><a class="docs-footer-nextpage" href="returns.html">Returns »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Tuesday 12 March 2024 20:54">Tuesday 12 March 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
